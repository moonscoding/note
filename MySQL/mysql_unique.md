## 유니크칼럼







## 유니크인덱스

유니크란 사실 엔덱스라기 보다 제약조건

말 그대로 테이블이나 인덱스에 같은 값이 2개 이상 저장될 수 없음을 의미 

**MySQL에서는 인덱스 없이 유니크 제약만 설정할 방법이 없음**

유니크 인덱스에서 NULL 도 저장 가능, NULL은 특정 값이 아니라 2개 이상 저장 가능

MySQL에서 PK는 기본적으로 NULL을 허용하지 않는 유니크 속성이 자동으로 부여



## 유니크인덱스 vs 일반보조인덱스(유니크하지않은)

구조상 차이는 없음

유니크 인덱스와 일반 보조 인덱스의 일기와 쓰기를 차이

- `인덱스 읽기`
  - 인덱스보조인덱스가 중복을 허용하여 처리량이 많아 느릴 수 있으나
  - 구조상으론 동일
- `인덱스 쓰기`
  - 새로운 레코드가 INSERT 되거나 인덱스 칼럼 값이 UPDATE 되는 경우에 인덱스 쓰기 작업이 필요
  - 유니크 인덱스의 키값을 쓸 때 중복된 값이 있는지 없는지 체크하는 과정을 한 단계 요구
  - 따라서 유니크인덱스가 성능상 느림
    - MySQL에서는 유니크 인덱스에서 중복된 값을 체크할 때 읽기 잠금을 사용하고, 쓰기를 할 때는 쓰기 잠금을 사용하며
      이 과정에서 데드락이 아주 빈번히 발생



## 유니크인덱스 주의사항

꼭 필요한 경우 유니크 인덱스 사용은 당연하나

성능이 좋아질 것이라 생각하고 불필요하게 유니크 인덱스를 생성하지 않는 것이 좋음

하나의 테이블에서 같은 칼럼에 유니크 인덱스와 일반 인덱스를 각각 중복해서 생성하면 

MySQL의 유니크 인덱스는 일반 다른 인덱스와 같은 역할로 중복됨으로 동시에 사용하지 않습니다.

```sql
CREATE TABLE tb_unique (     
    id INTEGER NOT NULL,     
    nick_name VARCHAR(100),     
    PRIMARY KEY (id),     
    UNIQUE INDEX ux_nickname (nick_name),     
    INDEX ix_nickname (nick_name) 
);
```

> 유니크 인덱스가 있다면 보조 인덱스를 만들지 마세요



똑같은 칼럼에 대해 PK와 유니크 인덱스를 동일하게 생성하면

불필요한 중복임으로 주의하는 것이 좋습니다.

결론적으로 유일성이 보장되어야 하는 칼럼에 대해서 유니크 인덱스를 생성하되 

꼭 필요하지 않다면 유니크 인덱스 보다 유니크하지 않은 보조 인덱스를 생성하는 방법도 고려





[참조](https://12bme.tistory.com/150)