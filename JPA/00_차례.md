# JPA 차례

## JPA 소개

- SQL을 직접 다룰 때 발생하는 문제점
  - 반복 반복 그리고 반복
  - SQL에 의존적인 개발
  - JPA와 문제 해결
- 패러다임의 불일치
  - 상속
  - 연관관계
  - 객체 그래프 탐색
  - 비교
  - 정리
- JPA란 무엇인가?
  - JPA 소개
  - 왜 JPA를 사용해야 하는가?
- 정리
- ORM에 대한 궁금증과 오해



## JPA 시작

- 이클립스 설치와 프로젝트 불러오기
- H2 데이터베이스 설치
- 라이브러리와 프로젝트 구조
  - 메이븐 사용 라이브러리 관리
- 객체 매핑 시작
- prrsistence.xml 설치
  - 데이터베이스 방언
- 애플리케이션 개발
  - 엔티티 매니저 설정
  - 트랜잭션 관리
  - 비즈니스 로직
  - JPQL
- 정리

## 영속성 관리

- 엔티티 매니저 팩토리와 엔티티 매니저
- 영속성 컨텍스트란
- 엔티티의 생명주기
- 영속성 컨텍스트의 특징
  - 엔티티 조회
  - 엔티티 등록
  - 엔티티 수정
  - 엔티티 삭제 
- 플러시
  - 플러시 모드 옵션
- 준영속
  - 엔티티를 준영속 상태로 전환 detach()
  - 영속성 컨텍스트 초기화 clear()
  - 영속성 컨텍스트 종료 close()
  - 준영속 상태의 특징
  - 병합 merge()
- 정리

## 엔티티 매핑

- @Entity
- @Table
- 다양한 매핑사용
- 데이터베이스 스키마 자동 생성
- DDL 생성 기능
- 기본 키 매핑
  - 기본 키 직접 할당 전략
  - IDENTITY 전략
  - SEQUENCE 전략
  - TABLE 전략
  - AUTO 전략
  - 기본 키 매핑 정리
- 필드와 컬럼 매핑 : 레퍼런스
  - @Column 
  - @Enmerated
  - @Temporal
  - @Lob
  - @Transient
  - @Access
- 정리
- 실전예제 1. 요구사항 분석과 기본 매핑

## 연관관계 매핑기초

- 단반향 연관관계
  - 순수한 객체 연관관계
  - 테이블 연관관계
  - 객체 관계 매핑
  - @JoinColumn
  - @ManyToOne
- 연관관계 사용
  - 저장
  - 조회
  - 수정
  - 연관관계 제거
  - 연관된 엔티티 삭제
- 양방향 연관관계
  - 양방향 연관관계 매핑
  - 일대다 컬렉션 조회
- 연관관계 주인
  - 양방향 매핑의 규칙 : 연관관계의 주인
  - 연관관계 주인은 외래키가 있는 곳
- 양방향 연관관계 저장
- 양방향 연관관계의 주의점
  - 순수한 객체까지 고려한 양방향 연관관계
  - 연관관계 편의 메소드
  - 연관관계 편의 메소드 작성시 주의사항
- 정리
- 실전예제 2. 연관관계 매핑 시작

## 다양한 연관관계 매핑

- 다대일
  - 다대일 단방향  [N:1]
  - 다대일 양방향 [N:1, 1:N]
- 일대다
  - 일대다 단방향 [1:N]
  - 일대다 양방향 [1:N, N:1]
- 일대일 
  - 주 테이블에 외래키
  - 대상 테이블에 외래키
- 다대다
  - 다대다 : 단방향 
  - 다대다 : 양방향
  - 다대다 : 매핑의 한계와 극복, 연결 엔티티 사용
  - 다대다 : 새로운 키본 키 사용
  - 다대다 : 연관관계 정리
- 정리
- 실전예제 3. 다양한 연관관계 매핑

## 고급매핑

- 상속 관계 매핑
  - 조인 전략
  - 단일 테이블 전략
  - 구현 클래스마다 테이블 전략
- @MappedSuperclass 
- 복합키와 식별 관계 매핑
  - 식별관계 vs 비식별관계
  - 복합키 : 비식별관계매핑
  - 복합키 : 식별관계매핑
  - 비식별 관계로 구현
  - 일대일 식별관계
  - 식별, 비식별 관계의 장단점
- 조인 테이블
  - 일대일 조인 테이블
  - 일대다 조인 테이블
  - 다대일 조인 테이블
  - 다대다 조인 테이블
- 엔티티 하나에 여려러 테이블 매핑
- 정리
- 실전 예제 4. 상속 관계 매핑



## 프록시와 연관관계 관리

- 프록시
  - 프록시 기초
  - 프록시와 식별자
  - 프록시 확인
- 즉시 로딩과 지연로딩
  - 즉시 로딩
  - 지연로딩
  - 즉시로딩, 지연로딩 정리
- 지연 로딩 활용
  - 프록시와 컬렉션 래퍼
  - JPA 기본 패치 전략
  - 컬렉션에 FetchType.EAGER 사용시 주의점
- 영속성 전이 : CASCADE
  - 영속성 전이 : 저장
  - 영속성 전이 : 삭제
  - CASCADE의 종류
- 고아 객체
- 영속성 전이 + 고아 객체, 생명 주기
- 정리
- 실전 예제 5. 연관관계 정리



## 값타입

- 기본값 타입

- 임베디드 타입(복합값타입)
  - 임베디드 타입과 테이블 패핑 
  - 임베디드 타입과 연관관계
  - @AttributeOverride : 속성 재정의
  - 임베디드 타입과 null
- 값 타입과 불변 객체
  - 값 타입 공유 참조
  - 값 타입 복사 
  - 불변 객체
- 값 타입의 비교
- 값 타입 컬렉션
  - 값 타입 컬렉션 사용 
  - 값 타입 컬렉션의 제약사항
- 정리 
- 실전 예제 6. 값 타입 매핑





## 객체지향 쿼리 언어

- 객체지향 쿼리 소개
  - JPQL 소개
  - Criteria 쿼리 소개
  - QueryDSL 소개
  - 네이티브 SQL 소개
  - JDBC 직접 사용, 마이바티스 같은 SQL 매퍼 프레임워크 사용
- JPQL
  - 기본 문법과 쿼리 API
  - 파라미터 바인딩
  - 프로젝션
  - 페이징 API
  - 집합과 정렬
  - JPQL 조인
  - 페치 조인 
  - 경로 표현식
  - 서브 쿼리
  - 조건식
  - 다형성 쿼리
  - 사용자 정의 함수 호출 (JPA2.1)
  - 기타 정리 
  - 엔티티 직접 사용 
  - Named 쿼리 : 정적 쿼리
- Criteria 
  - Criteria 기초
  - Criteria 쿼리 생성
  - 조회 
  - 집합
  - 정렬
  - 조인
  - 서브 쿼리
  - IN 식
  - CASE 식
  - 파라미터 정의 
  - 네이티브 함수 호출 
  - 동적 쿼리 
  - 함수 정리
  - Criteria 메타 모델 API
- QueryDSL
  - QueryDSL 설정
  - 시작
  - 검색 조건 쿼리
  - 결과 조회
  - 페이징과 정렬
  - 그룹
  - 조인
  - 서브 쿼리
  - 프로젝션과 결과 반환
  - 수정 삭제 배치 쿼리
  - 동적 쿼리
  - 메소드 위임
  - QueryDSL 정리 
- 네이티브 SQL
  - 네이티브 SQL 사용
  - Named 네이티브 SQL
  - 네이티브 SQL XML에 정리
  - 네이티브 SQL 정리
  - 스토어드 프로시저 (JPA 2.1)
- 객체 지향 쿼리 심화
  - 벌크 연산
  - 영속성 컨텍스트와 JPQL
  - JPQL과 플러시 모드
- 정리



## 웹 어플리케이션 제작

- 프로젝트 환경설정
- 도메인 모델과 테이블 설계
- 애플리케이션 구현



## 스프링 데이터 JPA





## 웹 애플리케이션과 영속성 관리



## 컬렉션과 부가 기능



## 고급 주제와 성능 최적화



## 트랙잭션과 락 2차 캐시



